<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mechanical keyboard firmware based around the STM32 HAL libraries: /home/alxhoff/git/Embedded/stm32-mech-keyboard/NuceloKeyboardController/Inc/keyboard.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mechanical keyboard firmware based around the STM32 HAL libraries
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_65157e439c706bbd2af5306bcfdb40bd.html">NuceloKeyboardController</a></li><li class="navelem"><a class="el" href="dir_e62092f6d07c6a8611f9dc83cba117c4.html">Inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">keyboard.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Data types and functions for performing classical keyboard functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;stm32f4xx_hal.h&quot;</code><br />
<code>#include &quot;<a class="el" href="datatypes_8h_source.html">datatypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="states_8h_source.html">states.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="keyboard__config_8h_source.html">keyboard_config.h</a>&quot;</code><br />
</div>
<p><a href="keyboard_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkeyboardHID.html">keyboardHID</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keyboard HID report.  <a href="structkeyboardHID.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmediaHID.html">mediaHID</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsingle__key.html">single_key</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a single keyboard key.  <a href="structsingle__key.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkeypress__buffer.html">keypress_buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keypress input buffer used to store keystroke input from keyboard.  <a href="structkeypress__buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsix__key__buffer.html">six_key_buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A six key buffer used to buffer keyboard HID reports.  <a href="structsix__key__buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structone__key__buffer.html">one_key_buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Single key buffer.  <a href="structone__key__buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsend__buffer.html">send_buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output buffers for the total keyboard HID data, media and keyboard.  <a href="structsend__buffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkeyboard__HID__data.html">keyboard_HID_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores all the HID data required for the keyboard.  <a href="structkeyboard__HID__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structkeyboard__device.html">keyboard_device</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the GPIO interface information.  <a href="structkeyboard__device.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac2b728463ae48d3aa61340a61be68225"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#ac2b728463ae48d3aa61340a61be68225">SCAN_KEY_BUFFER_LENGTH</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:ac2b728463ae48d3aa61340a61be68225"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of input buffer used when scanning the keyboard.  <a href="#ac2b728463ae48d3aa61340a61be68225">More...</a><br /></td></tr>
<tr class="separator:ac2b728463ae48d3aa61340a61be68225"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae1e2d2809df85854a9c34195cd7be87b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structkeyboardHID.html">keyboardHID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#ae1e2d2809df85854a9c34195cd7be87b">keyboardHID_t</a></td></tr>
<tr class="memdesc:ae1e2d2809df85854a9c34195cd7be87b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structkeyboardHID.html" title="Keyboard HID report. ">keyboardHID</a>.  <a href="#ae1e2d2809df85854a9c34195cd7be87b">More...</a><br /></td></tr>
<tr class="separator:ae1e2d2809df85854a9c34195cd7be87b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863aa6aa64424c7553e59386523412fe"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmediaHID.html">mediaHID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a863aa6aa64424c7553e59386523412fe">mediaHID_t</a></td></tr>
<tr class="memdesc:a863aa6aa64424c7553e59386523412fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structmediaHIDg.html" title="Media HID report. ">mediaHIDg</a>.  <a href="#a863aa6aa64424c7553e59386523412fe">More...</a><br /></td></tr>
<tr class="separator:a863aa6aa64424c7553e59386523412fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa504c5d09bf7cea600b72b6003a8772c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsingle__key.html">single_key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#aa504c5d09bf7cea600b72b6003a8772c">single_key_t</a></td></tr>
<tr class="memdesc:aa504c5d09bf7cea600b72b6003a8772c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structsingle__key.html" title="Represents a single keyboard key. ">single_key</a>.  <a href="#aa504c5d09bf7cea600b72b6003a8772c">More...</a><br /></td></tr>
<tr class="separator:aa504c5d09bf7cea600b72b6003a8772c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab586bec625b4d7aa91ae837cd567b247"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structkeypress__buffer.html">keypress_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#ab586bec625b4d7aa91ae837cd567b247">keypress_buffer_t</a></td></tr>
<tr class="memdesc:ab586bec625b4d7aa91ae837cd567b247"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structkeypress__buffer.html" title="Keypress input buffer used to store keystroke input from keyboard. ">keypress_buffer</a>.  <a href="#ab586bec625b4d7aa91ae837cd567b247">More...</a><br /></td></tr>
<tr class="separator:ab586bec625b4d7aa91ae837cd567b247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7751d5843483b986b63a84a5ea6963"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsix__key__buffer.html">six_key_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#ade7751d5843483b986b63a84a5ea6963">six_key_buffer_t</a></td></tr>
<tr class="memdesc:ade7751d5843483b986b63a84a5ea6963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structsix__key__buffer.html" title="A six key buffer used to buffer keyboard HID reports. ">six_key_buffer</a>.  <a href="#ade7751d5843483b986b63a84a5ea6963">More...</a><br /></td></tr>
<tr class="separator:ade7751d5843483b986b63a84a5ea6963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6323f912601b5a724db813a53fdcfe"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structone__key__buffer.html">one_key_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#aba6323f912601b5a724db813a53fdcfe">one_key_buffer_t</a></td></tr>
<tr class="memdesc:aba6323f912601b5a724db813a53fdcfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structone__key__buffer.html" title="Single key buffer. ">one_key_buffer</a>.  <a href="#aba6323f912601b5a724db813a53fdcfe">More...</a><br /></td></tr>
<tr class="separator:aba6323f912601b5a724db813a53fdcfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac075e64fc5b9925d7511d8afb5bdb2d2"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsend__buffer.html">send_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#ac075e64fc5b9925d7511d8afb5bdb2d2">send_buffer_t</a></td></tr>
<tr class="memdesc:ac075e64fc5b9925d7511d8afb5bdb2d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef of <a class="el" href="structsend__buffer.html" title="Output buffers for the total keyboard HID data, media and keyboard. ">send_buffer</a>.  <a href="#ac075e64fc5b9925d7511d8afb5bdb2d2">More...</a><br /></td></tr>
<tr class="separator:ac075e64fc5b9925d7511d8afb5bdb2d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a170270f39b7146a83d668bb94ee275f0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structkeyboard__HID__data.html">keyboard_HID_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a170270f39b7146a83d668bb94ee275f0">keyboard_HID_data_t</a></td></tr>
<tr class="separator:a170270f39b7146a83d668bb94ee275f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7e75cbef1b69dd1f18126ee9a44390"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structkeyboard__device.html">keyboard_device</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a5a7e75cbef1b69dd1f18126ee9a44390">keyboard_device_t</a></td></tr>
<tr class="separator:a5a7e75cbef1b69dd1f18126ee9a44390"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a452de650eae4de097b354fffcdd581a5"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a452de650eae4de097b354fffcdd581a5">keyboard_init</a> (<a class="el" href="datatypes_8h.html#a3f91b8703c531938c9e049363f0211f3">key_devices_t</a> *keyboard_devices, GPIO_TypeDef *<a class="el" href="extern_8h.html#ad9b4d2fea4c7b7d5158d56075c28e9ad">row_ports</a>[<a class="el" href="keymap_8h.html#ab89c69b09d4ca01020b7c40d9ca2bab8">KEYBOARD_ROWS</a>], uint16_t row_pins[<a class="el" href="keymap_8h.html#ab89c69b09d4ca01020b7c40d9ca2bab8">KEYBOARD_ROWS</a>])</td></tr>
<tr class="memdesc:a452de650eae4de097b354fffcdd581a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inits the keyboard device and GPIO pins.  <a href="#a452de650eae4de097b354fffcdd581a5">More...</a><br /></td></tr>
<tr class="separator:a452de650eae4de097b354fffcdd581a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86312a522a094b1ba780982dcb332590"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a86312a522a094b1ba780982dcb332590">process_key_buf</a> (<a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a> *data, <a class="el" href="datatypes_8h.html#ac282a7a696b1d7d36df8c0f4ebce07e7">keymap_list_t</a> *layer_list)</td></tr>
<tr class="memdesc:a86312a522a094b1ba780982dcb332590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes the input key buffer.  <a href="#a86312a522a094b1ba780982dcb332590">More...</a><br /></td></tr>
<tr class="separator:a86312a522a094b1ba780982dcb332590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad24b2fb66a7dd16687de627115aaca8d"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#ad24b2fb66a7dd16687de627115aaca8d">process_keyboard_flags</a> (<a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a> *data)</td></tr>
<tr class="memdesc:ad24b2fb66a7dd16687de627115aaca8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes any pending HID reports.  <a href="#ad24b2fb66a7dd16687de627115aaca8d">More...</a><br /></td></tr>
<tr class="separator:ad24b2fb66a7dd16687de627115aaca8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a442d58541dc886385963c9447895106f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a442d58541dc886385963c9447895106f">process_single_key</a> (<a class="el" href="datatypes_8h.html#ac282a7a696b1d7d36df8c0f4ebce07e7">keymap_list_t</a> *layer_list, uint8_t col, uint8_t row)</td></tr>
<tr class="memdesc:a442d58541dc886385963c9447895106f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the key code for a single key.  <a href="#a442d58541dc886385963c9447895106f">More...</a><br /></td></tr>
<tr class="separator:a442d58541dc886385963c9447895106f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ff7889fd839635e4a416b8ad53ca58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="keyboard_8h.html#a00ff7889fd839635e4a416b8ad53ca58">clear_keyboard_report</a> (<a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a> *data)</td></tr>
<tr class="memdesc:a00ff7889fd839635e4a416b8ad53ca58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the keyboard HID report.  <a href="#a00ff7889fd839635e4a416b8ad53ca58">More...</a><br /></td></tr>
<tr class="separator:a00ff7889fd839635e4a416b8ad53ca58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data types and functions for performing classical keyboard functions. </p>
<dl class="section author"><dt>Author</dt><dd>Alex Hoffman </dd></dl>
<dl class="section date"><dt>Date</dt><dd>11 October 2017 While the keyboard offers more advanced features, the classical keyboard I/O features of the keyboard are implemented within this file </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac2b728463ae48d3aa61340a61be68225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2b728463ae48d3aa61340a61be68225">&#9670;&nbsp;</a></span>SCAN_KEY_BUFFER_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCAN_KEY_BUFFER_LENGTH&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length of input buffer used when scanning the keyboard. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a5a7e75cbef1b69dd1f18126ee9a44390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7e75cbef1b69dd1f18126ee9a44390">&#9670;&nbsp;</a></span>keyboard_device_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structkeyboard__device.html">keyboard_device</a>  <a class="el" href="datatypes_8h.html#ad5787d8aae284c464e53e68876e82918">keyboard_device_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a170270f39b7146a83d668bb94ee275f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a170270f39b7146a83d668bb94ee275f0">&#9670;&nbsp;</a></span>keyboard_HID_data_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structkeyboard__HID__data.html">keyboard_HID_data</a>  <a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae1e2d2809df85854a9c34195cd7be87b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1e2d2809df85854a9c34195cd7be87b">&#9670;&nbsp;</a></span>keyboardHID_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#ae1e2d2809df85854a9c34195cd7be87b">keyboardHID_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structkeyboardHID.html" title="Keyboard HID report. ">keyboardHID</a>. </p>

</div>
</div>
<a id="ab586bec625b4d7aa91ae837cd567b247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab586bec625b4d7aa91ae837cd567b247">&#9670;&nbsp;</a></span>keypress_buffer_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#ab586bec625b4d7aa91ae837cd567b247">keypress_buffer_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structkeypress__buffer.html" title="Keypress input buffer used to store keystroke input from keyboard. ">keypress_buffer</a>. </p>

</div>
</div>
<a id="a863aa6aa64424c7553e59386523412fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a863aa6aa64424c7553e59386523412fe">&#9670;&nbsp;</a></span>mediaHID_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#a863aa6aa64424c7553e59386523412fe">mediaHID_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structmediaHIDg.html" title="Media HID report. ">mediaHIDg</a>. </p>

</div>
</div>
<a id="aba6323f912601b5a724db813a53fdcfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6323f912601b5a724db813a53fdcfe">&#9670;&nbsp;</a></span>one_key_buffer_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#aba6323f912601b5a724db813a53fdcfe">one_key_buffer_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structone__key__buffer.html" title="Single key buffer. ">one_key_buffer</a>. </p>

</div>
</div>
<a id="ac075e64fc5b9925d7511d8afb5bdb2d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac075e64fc5b9925d7511d8afb5bdb2d2">&#9670;&nbsp;</a></span>send_buffer_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#ac075e64fc5b9925d7511d8afb5bdb2d2">send_buffer_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structsend__buffer.html" title="Output buffers for the total keyboard HID data, media and keyboard. ">send_buffer</a>. </p>

</div>
</div>
<a id="aa504c5d09bf7cea600b72b6003a8772c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa504c5d09bf7cea600b72b6003a8772c">&#9670;&nbsp;</a></span>single_key_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#aa504c5d09bf7cea600b72b6003a8772c">single_key_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structsingle__key.html" title="Represents a single keyboard key. ">single_key</a>. </p>

</div>
</div>
<a id="ade7751d5843483b986b63a84a5ea6963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade7751d5843483b986b63a84a5ea6963">&#9670;&nbsp;</a></span>six_key_buffer_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="keyboard_8h.html#ade7751d5843483b986b63a84a5ea6963">six_key_buffer_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef of <a class="el" href="structsix__key__buffer.html" title="A six key buffer used to buffer keyboard HID reports. ">six_key_buffer</a>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a00ff7889fd839635e4a416b8ad53ca58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00ff7889fd839635e4a416b8ad53ca58">&#9670;&nbsp;</a></span>clear_keyboard_report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clear_keyboard_report </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a> *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the keyboard HID report. </p>

</div>
</div>
<a id="a452de650eae4de097b354fffcdd581a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452de650eae4de097b354fffcdd581a5">&#9670;&nbsp;</a></span>keyboard_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t keyboard_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="datatypes_8h.html#a3f91b8703c531938c9e049363f0211f3">key_devices_t</a> *&#160;</td>
          <td class="paramname"><em>keyboard_devices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GPIO_TypeDef *&#160;</td>
          <td class="paramname"><em>row_ports</em>[KEYBOARD_ROWS], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>row_pins</em>[KEYBOARD_ROWS]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inits the keyboard device and GPIO pins. </p>
<p>To initialise the keyboard device, this function must be called with the colum GPIO pins and ports, stored in arrays, passed to it. The GPIO are initialised and all default values are set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyboard_devices</td><td>global keyboard devices struct </td></tr>
    <tr><td class="paramname">row_ports</td><td>array of GPIO pointers to the row ports </td></tr>
    <tr><td class="paramname">row_pins</td><td>array of GPIO pin values </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd></dl>

</div>
</div>
<a id="a86312a522a094b1ba780982dcb332590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86312a522a094b1ba780982dcb332590">&#9670;&nbsp;</a></span>process_key_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t process_key_buf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datatypes_8h.html#ac282a7a696b1d7d36df8c0f4ebce07e7">keymap_list_t</a> *&#160;</td>
          <td class="paramname"><em>layer_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes the input key buffer. </p>
<p>Once the keyboard scan is complete and the input key buffer has been populated the buffer must be processed. The keyboard state is first handled, going to state code if needed. The buffer is then processed, sorting keys into either modifier keys, media keys or keyboard keys. Once sorted the key codes or bitmasks are retrieved/set. Normal keyboard button presses are first compared against the last HID report as repeating keys get priority in the the next HID report as they represent keys being held down. Keys not in the previous HID report are shortlisted such that after all keys have been converted into key codes the HID report can be filled with shortlisted keys.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>global keyboard HID data </td></tr>
    <tr><td class="paramname">layer_list</td><td>layer list used to convert key_codes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd></dl>

</div>
</div>
<a id="ad24b2fb66a7dd16687de627115aaca8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad24b2fb66a7dd16687de627115aaca8d">&#9670;&nbsp;</a></span>process_keyboard_flags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t process_keyboard_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="datatypes_8h.html#a9539035ff5404f9a5fb4c1985d2f3fcc">keyboard_HID_data_t</a> *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes any pending HID reports. </p>
<p>Once a HID report is pending the keyboard state/media state will be set to active, if the state is such then the current pending report is sent. If there is not report pending but one was just sent and empty report is sent. This corresponds to the state "clearing".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>global keyboard HID data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd></dl>

</div>
</div>
<a id="a442d58541dc886385963c9447895106f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a442d58541dc886385963c9447895106f">&#9670;&nbsp;</a></span>process_single_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t process_single_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="datatypes_8h.html#ac282a7a696b1d7d36df8c0f4ebce07e7">keymap_list_t</a> *&#160;</td>
          <td class="paramname"><em>layer_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the key code for a single key. </p>
<p>The key code retrieved is taken from the most underlying layer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer_list</td><td>layer list to be used to extracting the key code </td></tr>
    <tr><td class="paramname">col</td><td>column of the key </td></tr>
    <tr><td class="paramname">row</td><td>row of the key </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>key code of the key from the most underlying layer </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
